<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>

    <script>
    const movementSpeed = 8;
    let config = {
        type: Phaser.AUTO,
        width: 500,
        height: 700,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 0 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    let game = new Phaser.Game(config);

    function preload ()
    {
        this.load.image('background' , 'assets/Background/BackgroundMoon.png');
        this.load.image('player1' , 'assets/playerSprites/PlayerShipIdle1.png');
        this.load.image('player2' , 'assets/playerSprites/PlayerShipIdle2.png');
        this.load.image('playerLeft1' , 'assets/playerSprites/PlayerShipLeftTilt1.png');
        this.load.image('playerLeft2' , 'assets/playerSprites/PlayerShipLeftTilt2.png');
        this.load.image('playerRight1' , 'assets/playerSprites/PlayerShipRightTilt1.png');
        this.load.image('playerRight2', 'assets/playerSprites/PlayerShipRightTilt2.png');
        this.load.image('playerBullet' , 'assets/playerSprites/PlayerBullet.png');
        this.load.image('playerExplosion1', 'assets/playerSprites/PlayerShipExplosion2.png');
        this.load.image('playerExplosion2', 'assets/playerSprites/PlayerShipExplosion3.png');
        this.load.image('playerExplosion3', 'assets/playerSprites/PlayerShipExplosion4.png');
        this.load.image('enemyBullet' , 'assets/Bullet/EnemyBullet.png');
        this.load.image('enemy' , 'assets/Enemies/DakanIdle.png');
    }

    function create ()
    {
        this.add.image(250, 350, 'background');
        player = this.physics.add.sprite(250, 600, 'player1');
        player.setCollideWorldBounds(true);
        enemy = this.physics.add.sprite(500, 500, 'enemy');
        enemy.setCollideWorldBounds(true);
        bullets = this.physics.add.group();
        function playerHit() {
            player.anims.play('explode', true);
            console.log("player dead");
            
        }
        this.physics.add.collider(player, bullets , playerHit);

        this.anims.create({
        key: 'left',
        frames: [
            { key: 'playerLeft1', frame: null },
            { key: 'playerLeft2', frame: null },
            
        ],
        frameRate: 8,
        repeat: -1
        });
        
        this.anims.create({
        key: 'right',
        frames: [
            { key: 'playerRight1', frame: null },
            { key: 'playerRight2', frame: null },
            
        ],
        frameRate: 8,
        repeat: -1
        });
        this.anims.create({
            key: 'explode',
        frames: [
            { key: 'playerExplosion1' , frame: null},
            { key: 'playerExplosion2', frame: null},
            { key: 'plaerExplosion3' , frame: null}
            
        ],
        frameRate: 10,
        repeat: 1
        });
        


    }
    function update () 
    {
        cursors = this.input.keyboard.createCursorKeys();
        if (cursors.left.isDown)
        {
      
           player.anims.play('left', true);
           player.x -= movementSpeed;
           
        }
        else if (cursors.right.isDown)
        {
            player.anims.play('right', true);
            player.x += movementSpeed;
        }
        else
        {
             player.anims.stop();
            
        }
        if (cursors.up.isDown)
        {
       
        player.y -= movementSpeed;
        }
        else if(cursors.down.isDown){
            player.y += movementSpeed;
        }
        else
        {
             player.anims.stop();
            
        }
        let randX = Math.floor(Math.random() * 50); 
        let randY = Math.floor(Math.random() * 50); 
        let Xpos = Math.floor(Math.random() * 2); 
        let Ypos = Math.floor(Math.random() * 2); 
        if(Xpos >= 1){
            enemy.x += randX;
        }
        else {
            enemy.x -= randX;
        }
        if(Ypos >= 1){
            enemy.y += randY;
        }
        else {
            enemy.y -= randY;
        }
       let bullet = bullets.create(enemy.x, enemy.y, 'enemyBullet');
       bullet.setVelocityX( Math.floor(Math.random() * 300));
       bullet.setVelocityY( Math.floor(Math.random() * 300));
    }
    </script>

</body>
</html>